define(['jQuery'],function($){var query={SortBy:"SortName",SortOrder:"Ascending",Recursive:true,Fields:"DateCreated,ItemCounts",StartIndex:0};function getSavedQueryKey(){return LibraryBrowser.getSavedQueryKey();}
function reloadItems(page){Dashboard.showLoadingMsg();ApiClient.getGameGenres(Dashboard.getCurrentUserId(),query).then(function(result){window.scrollTo(0,0);var html='';$('.listTopPaging',page).html(LibraryBrowser.getQueryPagingHtml({startIndex:query.StartIndex,limit:query.Limit,totalRecordCount:result.TotalRecordCount,showLimit:false}));html=LibraryBrowser.getPosterViewHtml({items:result.Items,shape:"backdrop",preferThumb:true,context:'games',showItemCounts:true,centerText:true,lazy:true});var elem=page.querySelector('#items');elem.innerHTML=html;ImageLoader.lazyChildren(elem);$('.btnNextPage',page).on('click',function(){query.StartIndex+=query.Limit;reloadItems(page);});$('.btnPreviousPage',page).on('click',function(){query.StartIndex-=query.Limit;reloadItems(page);});LibraryBrowser.saveQueryValues(getSavedQueryKey(),query);Dashboard.hideLoadingMsg();});}
$(document).on('pagebeforeshow',"#gameGenresPage",function(){query.ParentId=LibraryMenu.getTopParentId();var limit=LibraryBrowser.getDefaultPageSize();if(limit!=query.Limit){query.Limit=limit;query.StartIndex=0;}
LibraryBrowser.loadSavedQueryValues(getSavedQueryKey(),query);reloadItems(this);});});