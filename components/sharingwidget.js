define(['paperdialoghelper','jQuery','thirdparty/social-share-kit-1.0.4/dist/js/social-share-kit.min','css!thirdparty/social-share-kit-1.0.4/dist/css/social-share-kit.css'],function(paperDialogHelper,$){function showMenu(options,successCallback,cancelCallback){var dlg=paperDialogHelper.createDialog({removeOnClose:true,autoFocus:false});dlg.id='dlg'+new Date().getTime();var html='';html+='<h2>'+Globalize.translate('HeaderShare')+'</h2>';html+='<div>';html+='<div class="ssk-group ssk-round ssk-lg">';if(Dashboard.isConnectMode()){html+='<a href="" class="ssk ssk-facebook"></a>';}
html+='<a href="" class="ssk ssk-twitter"></a><a href="" class="ssk ssk-google-plus"></a><a href="" class="ssk ssk-pinterest"></a><a href="" class="ssk ssk-tumblr"></a></div>';html+='</div>';html+='<div style="max-width:240px;">';html+=Globalize.translate('ButtonShareHelp');html+='</div>';html+='<div class="buttons">';html+='<paper-button class="btnCancel" dialog-dismiss>'+Globalize.translate('ButtonCancel')+'</paper-button>';html+='</div>';dlg.innerHTML=html;document.body.appendChild(dlg);var isShared=false;var shareInfo=options.share;SocialShareKit.init({selector:'#'+dlg.id+' .ssk',url:shareInfo.Url,title:shareInfo.Name,text:shareInfo.Overview,image:shareInfo.ImageUrl,via:'Emby'});dlg.addEventListener('close',function(){if(isShared){successCallback(options);}else{cancelCallback(options);}});$('.ssk',dlg).on('click',function(){isShared=true;paperDialogHelper.close(dlg);});dlg.querySelector('.btnCancel').addEventListener('click',function(){paperDialogHelper.close(dlg);});paperDialogHelper.open(dlg);}
return{showMenu:showMenu};});